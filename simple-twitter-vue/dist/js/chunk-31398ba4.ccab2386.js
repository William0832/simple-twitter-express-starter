(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31398ba4"],{7950:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt-4 d-flex flex-column align-items-start"},[r("img",{attrs:{src:t.user.avatar,width:"250px",height:"250px"}}),r("div",{staticClass:"mt-2 d-flex flex-column align-items-start"},[r("h2",{staticClass:"title"},[t._v(t._s(t.user.name))]),r("p",{staticStyle:{width:"300px","text-align":"left","word-break":"break-all"}},[t._v(t._s(t.user.introduction))]),r("ul",{staticClass:"list-inline list-unstyled"},[r("li",{staticStyle:{"text-align":"left"}},[r("router-link",{attrs:{to:{name:"user",params:{id:t.user.id}}}},[r("strong",[t._v(t._s(t.user.tweetsCount)+" ")]),t._v("Tweets ")])],1),r("li",{staticStyle:{"text-align":"left"}},[r("router-link",{attrs:{to:{name:"users-followings",params:{id:t.user.id}}}},[r("strong",[t._v(t._s(t.user.followingCount))]),t._v(" followings (追蹤者) ")])],1),r("li",{staticStyle:{"text-align":"left"}},[r("router-link",{attrs:{to:{name:"users-followers",params:{id:t.user.id}}}},[r("strong",[t._v(t._s(t.user.followerCount))]),t._v(" followers (追隨者) ")])],1),r("li",{staticStyle:{"text-align":"left"}},[r("router-link",{attrs:{to:{name:"users-likes",params:{id:t.user.id}}}},[r("strong",[t._v(t._s(t.user.likeCount))]),t._v(" Likes ")])],1)]),r("div",{attrs:{id:"follow-btns"}},[t.user.isFollowed||t.user.isCurrentUser?t.user.isFollowed&&!t.user.isCurrentUser?r("button",{staticClass:"btn btn-danger",attrs:{disabled:t.isProcessing,type:"button"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.unfollow(t.user.id)}}},[t._v("取消追蹤")]):r("router-link",{staticClass:"btn btn-primary ml-2",attrs:{to:{name:"users-profile-edit",query:{id:t.user.id}}}},[t._v("edit profile")]):r("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isProcessing,type:"button"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.follow(t.user.id)}}},[t._v("追蹤")])],1)])])},o=[],n=(r("96cf"),r("1da1")),a=r("4cce"),i=r("2fa3"),l={props:{user:{type:Object,required:!0}},data:function(){return{isProcessing:!1}},methods:{follow:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.isProcessing=!0,r.next=4,a["a"].follow(t);case 4:s=r.sent,o=s.data,console.log("data",o),e.$emit("after-follow-user",t),e.isProcessing=!1,r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),e.isProcessing=!1,i["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},unfollow:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.isProcessing=!0,r.next=4,a["a"].unfollow(t);case 4:if(s=r.sent,o=s.data,console.log("data",o),"success"===o.status){r.next=9;break}throw new Error(o.message);case 9:e.$emit("after-unfollow-user",t),e.isProcessing=!1,r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),e.isProcessing=!1,i["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()}}},u=l,c=r("2877"),f=Object(c["a"])(u,s,o,!1,null,null,null);e["a"]=f.exports},"8e88":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h2",{staticClass:"mt-5 mb-4 d-flex align-items-start"},[t._v("Follower")]),r("ul",{staticClass:"list-unstyled"},[r("div",{staticClass:"row no-gutters"},t._l(t.followList,(function(e){return r("li",{key:e.id,staticClass:"col-6"},[r("div",{staticClass:"card m-1 p-3"},[r("div",{staticClass:"row no-gutters mt-2",attrs:{id:"card-contents"}},[r("div",{staticClass:"col-4"},[r("img",{attrs:{src:e.avatar,alt:"",height:"100",width:"100"}})]),r("div",{staticClass:"col-8 d-flex flex-column align-items-start"},[r("router-link",{attrs:{to:{name:"user",params:{id:e.id}}}},[r("h5",{},[t._v(t._s(e.name))])]),r("p",{staticStyle:{"text-align":"left",width:"90%"}},[t._v(t._s(t._f("peek")(e.introduction)))]),e.isFollowed?r("button",{staticClass:"btn btn-danger",attrs:{disabled:t.isProcessing,type:"button"},on:{click:function(r){return r.preventDefault(),r.stopPropagation(),t.unfollow(e.id)}}},[t._v("取消追蹤")]):r("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isProcessing,type:"button"},on:{click:function(r){return r.preventDefault(),r.stopPropagation(),t.follow(e.id)}}},[t._v("追蹤")])],1)])])])})),0)])])},o=[],n=(r("96cf"),r("1da1")),a=r("4cce"),i=r("2fa3"),l={props:{followList:{type:Array,required:!0}},data:function(){return{isProcessing:!1}},filters:{peek:function(t){return t.length>50?"".concat(t.substr(0,50)," ..."):t||"-"}},methods:{follow:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.isProcessing=!0,r.next=4,a["a"].follow(t);case 4:if(s=r.sent,o=s.data,console.log("data",o),"success"===o.status){r.next=9;break}throw new Error(o.message);case 9:e.$emit("after-follow",t),e.isProcessing=!1,r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),e.isProcessing=!1,i["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()},unfollow:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.isProcessing=!0,r.next=4,a["a"].unfollow(t);case 4:if(s=r.sent,o=s.data,console.log("data",o),"success"===o.status){r.next=9;break}throw new Error(o.message);case 9:e.$emit("after-unfollow",t),e.isProcessing=!1,r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),e.isProcessing=!1,i["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()}}},u=l,c=r("2877"),f=Object(c["a"])(u,s,o,!1,null,null,null);e["a"]=f.exports},cc95:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fluid d-flex flex-column flex-grow-1 vh-100 overflow-hidden py-5"},[r("div",{staticClass:"row px-5 mx-auto flex-grow-1 overflow-hidden",staticStyle:{width:"85%"}},[r("UserProfileCard",{staticClass:"col-md-4 mr-auto mh-100 overflow-auto",attrs:{user:t.user},on:{"after-follow-user":t.afterFollowUser,"after-unfollow-user":t.afterUnfollowUser}}),r("UserFollowingCard",{staticClass:"col-md-8 mh-100 overflow-auto",attrs:{"follow-list":t.followingList},on:{"after-follow":t.afterFollow,"after-unfollow":t.afterUnfollow}})],1)])},o=[],n=(r("d81d"),r("b0c0"),r("5530")),a=(r("96cf"),r("1da1")),i=r("7950"),l=r("8e88"),u=r("4cce"),c=r("2fa3"),f={components:{UserProfileCard:i["a"],UserFollowingCard:l["a"]},data:function(){return{user:{id:-1,email:"",name:"",avatar:"",introduction:"",role:"",isCurrentUser:null,isFollowed:null,tweetsCount:-1,followingCount:-1,followerCount:-1,likeCount:-1},followingList:[]}},created:function(){var t=this.$route.params.id;this.fetchProfileData(t),this.fetchFollowingsData(t)},methods:{fetchProfileData:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,o,a,i,l,f,w,d,g,p,m,v,h,b,C,x;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].getUserProfile(t);case 3:if(s=r.sent,o=s.data,a=s.statusText,"OK"===a){r.next=7;break}throw new Error;case 7:i=o.user,l=i.id,f=i.email,w=i.name,d=i.avatar,g=i.introduction,p=i.role,m=i.isCurrentUser,v=i.isFollowed,h=i.tweetsCount,b=i.followingCount,C=i.followerCount,x=i.likeCount,e.user=Object(n["a"])(Object(n["a"])({},e.user),{},{id:l,email:f,name:w,avatar:d,introduction:g,role:p,isCurrentUser:m,isFollowed:v,tweetsCount:h,followingCount:b,followerCount:C,likeCount:x}),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),c["a"].fire({icon:"error",title:"無法取得proile資料"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},fetchFollowingsData:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].getFollowings(t);case 3:if(s=r.sent,o=s.data,n=s.statusText,"OK"===n){r.next=7;break}throw new Error;case 7:e.followingList=o.followings,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),c["a"].fire({icon:"error",title:"無法取得Followings資料"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},afterFollow:function(t){console.log("following:",t),this.followingList=this.followingList.map((function(e){return e.id!==t?e:Object(n["a"])(Object(n["a"])({},e),{},{followerCount:e.followerCount+1,isFollowed:!0})}))},afterUnfollow:function(t){console.log("unfollowed"),console.log("unfollowed: ",t),this.followingList=this.followingList.map((function(e){return e.id!==t?e:Object(n["a"])(Object(n["a"])({},e),{},{followerCount:e.followerCount-1,isFollowed:!1})}))},afterFollowUser:function(t){t===this.user.id&&(this.user=Object(n["a"])(Object(n["a"])({},this.user),{},{followerCount:this.user.followerCount+1,isFollowed:!0}))},afterUnfollowUser:function(t){t===this.user.id&&(this.user=Object(n["a"])(Object(n["a"])({},this.user),{},{followerCount:this.user.followerCount-1,isFollowed:!1}))}}},w=f,d=r("2877"),g=Object(d["a"])(w,s,o,!1,null,null,null);e["default"]=g.exports},d81d:function(t,e,r){"use strict";var s=r("23e7"),o=r("b727").map,n=r("1dde"),a=r("ae40"),i=n("map"),l=a("map");s({target:"Array",proto:!0,forced:!i||!l},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-31398ba4.ccab2386.js.map